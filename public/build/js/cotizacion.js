!function(){let e=[];c([]),t(),document.querySelector(".formlario-buscar-producto").addEventListener("click",(function(t){if(t.preventDefault(),t.target.classList.contains("boton-enviar")){if(""===document.querySelector("#codigo").value.trim())return void o("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"));const t=document.querySelector("#idProducto").value,c=document.querySelector("#producto").value,n=document.querySelector("#precio").value,r=document.querySelector("#cantidad").value,d=document.querySelector("#descuento").value;productoAgregar={idProducto:t,nombre:c,precio:n,cantidad:r,descuento:d},async function(t){const o=new FormData;o.append("productoId",t.idProducto),o.append("cantidad",t.cantidad),o.append("precio",t.precio),o.append("descuento",t.descuento);try{const t="/api/temporal",c=await fetch(t,{method:"POST",body:o});!async function(t){const o="/api/buscarTemporal?token="+t.token,c=await fetch(o),n=await c.json();e=n.producto,function(){if(function(){const e=document.querySelector("#cotizador");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===e.length){const e=document.querySelector("#cotizador"),t=document.createElement("H3");return t.textContent="No hay Productos, Agrega uno desde el formulario de la izquierda",t.classList.add("no-cotizacion"),void e.appendChild(t)}e.forEach(e=>{const t=document.createElement("DIV");t.dataset.productoId=e.id,t.classList.add("productoDiv");const o=document.createElement("H3");o.textContent=e.nombre;const c=document.createElement("H4");c.textContent=e.precio;const n=document.createElement("DIV");n.classList.add("cantidad-descuento");const r=document.createElement("P");r.textContent=e.cantidad+" UND";const d=document.createElement("P");d.textContent=e.descuento+"%",n.appendChild(r),n.appendChild(d);const a=e.precio*e.cantidad,u=a-a*e.descuento/100,i=document.createElement("H3");i.textContent=u,t.appendChild(o),t.appendChild(c),t.appendChild(n),t.appendChild(i),document.querySelector("#cotizador").appendChild(t)})}()}(await c.json())}catch(e){console.log(e)}}(productoAgregar)}})),document.querySelector("#codigo").addEventListener("keyup",(function(e){const t=e.target.value.trim();""!==t?async function(e){const t="/api/buscarProductos?producto="+e,c=await fetch(t),n=await c.json(),r=n.producto;"error"===n&&o(c.tipo,c.mensaje,document.querySelector(".paso2Titulo")),function(e){document.querySelector("#idProducto").value=e.id,document.querySelector("#producto").value=e.nombre,document.querySelector("#precio").value=e.precio}(r)}(t):o("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"))}));async function t(e){try{const t="/api/buscarClientes?nit="+e,o=await fetch(t),n=await o.json();!function(e){const t=document.querySelector("#razon"),o=document.querySelector("#telefono"),n=document.querySelector("#direccion"),r=document.querySelector("#departamento"),d=document.querySelector("#ciudad");t.value=e.razon_social,o.value=e.telefono,n.value=e.direccion,r.value=e.departamentoId,d.value=e.ciudad,c({...e})}(n.cliente)}catch(e){console.log(e)}}function o(e,t,o){const c=document.querySelector(".alerta");c&&c.remove();const n=document.createElement("DIV");n.classList.add("alerta",e),n.textContent=t,o.parentElement.insertBefore(n,o.nextElementSibling),setTimeout(()=>{n.remove()},2500)}function c(e){console.log(e.id)}document.querySelector(".nitCliente").addEventListener("keyup",(function(e){t(e.target.value)}))}();