!function(){let e=[];n([]),t(),document.querySelector(".formlario-buscar-producto").addEventListener("click",(function(t){if(t.preventDefault(),t.target.classList.contains("boton-enviar")){if(""===document.querySelector("#codigo").value.trim())return void o("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"));const t=document.querySelector("#idProducto").value,n=document.querySelector("#producto").value,c=document.querySelector("#precio").value,r=document.querySelector("#cantidad").value,d=document.querySelector("#descuento").value;productoAgregar={idProducto:t,nombre:n,precio:c,cantidad:r,descuento:d},async function(t){const o=new FormData;o.append("productoId",t.idProducto),o.append("cantidad",t.cantidad),o.append("precio",t.precio),o.append("descuento",t.descuento);try{const t=server+"/api/temporal",n=await fetch(t,{method:"POST",body:o});!async function(t){const o=`${window.location.origin}/api/buscarTemporal?token=${t.token}`,n=await fetch(o),c=await n.json();e=c.producto,function(){if(function(){const e=document.querySelector("#cotizador");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===e.length){const e=document.querySelector("#cotizador"),t=document.createElement("H3");return t.textContent="No hay Productos, Agrega uno desde el formulario de la izquierda",t.classList.add("no-cotizacion"),void e.appendChild(t)}e.forEach(e=>{const t=document.createElement("DIV");t.dataset.productoId=e.id,t.classList.add("productoDiv");const o=document.createElement("H3");o.textContent=e.nombre;const n=document.createElement("H4");n.textContent="$."+e.precio;const c=document.createElement("DIV");c.classList.add("cantidad-descuento");const r=document.createElement("P");r.textContent=e.cantidad+" UND";const d=document.createElement("P");d.textContent=e.descuento+"%",c.appendChild(r),c.appendChild(d),t.appendChild(o),t.appendChild(n),t.appendChild(c),document.querySelector("#cotizador").appendChild(t)})}()}(await n.json())}catch(e){console.log(e)}}(productoAgregar)}})),document.querySelector("#codigo").addEventListener("keyup",(function(e){const t=e.target.value.trim();""!==t?async function(e){const t=`${window.location.origin}/api/buscarProductos?producto=${e}`,n=await fetch(t),c=await n.json(),r=c.producto;"error"===c&&o(n.tipo,n.mensaje,document.querySelector(".paso2Titulo")),function(e){document.querySelector("#idProducto").value=e.id,document.querySelector("#producto").value=e.nombre,document.querySelector("#precio").value=e.precio}(r)}(t):o("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"))}));async function t(e){try{const t=`${server}/api/buscarClientes?nit=${e}`,o=await fetch(t),c=await o.json();!function(e){const t=document.querySelector("#razon"),o=document.querySelector("#telefono"),c=document.querySelector("#direccion"),r=document.querySelector("#departamento"),d=document.querySelector("#ciudad");t.value=e.razon_social,o.value=e.telefono,c.value=e.direccion,r.value=e.departamentoId,d.value=e.ciudad,n({...e})}(c.cliente)}catch(e){console.log(e)}}function o(e,t,o){const n=document.querySelector(".alerta");n&&n.remove();const c=document.createElement("DIV");c.classList.add("alerta",e),c.textContent=t,o.parentElement.insertBefore(c,o.nextElementSibling),setTimeout(()=>{c.remove()},2500)}function n(e){console.log(e.id)}document.querySelector(".nitCliente").addEventListener("keyup",(function(e){t(e.target.value)}))}();