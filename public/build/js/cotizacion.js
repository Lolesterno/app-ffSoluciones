!function(){let e=[],t=[];function o(){if(console.log(t),function(){const e=document.querySelector(".productos-cotizados");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===t.length){const e=document.querySelector(".productos-cotizados"),t=document.createElement("H3");return t.textContent="No hay datos",t.classList.add("noDatos"),void e.appendChild(t)}numeracion(),t.forEach(e=>{const t=document.createElement("DIV");t.classList.add("borrar-producto");const o=document.createElement("BUTTON");o.classList.add("boton"),o.textContent="Borrar",o.addEventListener("click",(function(){var t;t=e.id,console.log(t)})),t.appendChild(o);const c=document.createElement("DIV");c.classList.add("producto-cotizado"),c.dataset.id=e.id;const n=document.createElement("H3");n.textContent=e.nombre;const a=document.createElement("H4");a.textContent="$."+e.precio;const d=document.createElement("DIV");d.classList.add("cantidad-descuento");const r=document.createElement("P");r.textContent=e.descuento;const u=document.createElement("P");u.textContent=e.cantidad,d.appendChild(u),d.appendChild(r),c.appendChild(n),c.appendChild(a),c.appendChild(d),c.appendChild(t);document.querySelector(".productos-cotizados").appendChild(c)})}document.querySelector("#nit").addEventListener("keyup",(function(t){!async function(t){try{const o="/api/buscarClientes?nit="+t,c=await fetch(o),n=await c.json();e=n.cliente.id,function(e){const{ciudad:t,correo:o,direccion:c,razon_social:n,telefono:a}=e.cliente;document.querySelector("#razon").value=n,document.querySelector("#correo").value=o,document.querySelector("#direccion").value=c,document.querySelector("#ciudad").value=t,document.querySelector("#telefono").value=a}(n)}catch(e){}}(t.target.value)})),document.querySelector("#codigo").addEventListener("keyup",(function(e){!async function(e){try{const t="/api/buscarProductos?codigo="+e,o=await fetch(t);!function(e){const{id:t,nombre:o,precio:c}=e.producto,n=document.createElement("INPUT");n.type="hidden",n.classList.add("id"),n.value=t,document.querySelector(".forms").appendChild(n),document.querySelector("#producto").value=o,document.querySelector("#precio").value=c}(await o.json())}catch(e){document.querySelector("#producto").value="",document.querySelector("#precio").value=""}}(e.target.value)})),document.querySelector(".forms").addEventListener("submit",(function(e){e.preventDefault(),async function(e,c,n,a){const d=new FormData;d.append("productoId",a),d.append("cantidad",c),d.append("precio",e),d.append("descuento",n);try{const e="/api/temporal",c=await fetch(e,{method:"POST",body:d});!async function(e){try{const c="/api/temporalProductos?token="+e.token,n=await fetch(c),a=await n.json();t=a.producto,o(),async function(e){try{const t="/api/totales?token="+e,o=await fetch(t),c=await o.json();console.log(c)}catch(e){}}(e.token)}catch(e){}}(await c.json())}catch(e){}}(document.querySelector("#precio").value,document.querySelector("#cantidad").value,document.querySelector("#descuento").value,document.querySelector(".id").value)})),o()}();