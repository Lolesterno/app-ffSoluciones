!function(){const e=window.location.origin;let t=[];n([]),o(),document.querySelector(".formlario-buscar-producto").addEventListener("click",(function(o){if(o.preventDefault(),o.target.classList.contains("boton-enviar")){if(""===document.querySelector("#codigo").value.trim())return void c("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"));const o=document.querySelector("#idProducto").value,n=document.querySelector("#producto").value,r=document.querySelector("#precio").value,d=document.querySelector("#cantidad").value,a=document.querySelector("#descuento").value;productoAgregar={idProducto:o,nombre:n,precio:r,cantidad:d,descuento:a},async function(o){const c=new FormData;c.append("productoId",o.idProducto),c.append("cantidad",o.cantidad),c.append("precio",o.precio),c.append("descuento",o.descuento);try{const o=e+"/api/temporal",n=await fetch(o,{method:"POST",body:c});!async function(o){const c=`${e}/api/buscarTemporal?token=${o.token}`,n=await fetch(c),r=await n.json();t=r.producto,function(){if(function(){const e=document.querySelector("#cotizador");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===t.length){const e=document.querySelector("#cotizador"),t=document.createElement("H3");return t.textContent="No hay Productos, Agrega uno desde el formulario de la izquierda",t.classList.add("no-cotizacion"),void e.appendChild(t)}t.forEach(e=>{const t=document.createElement("DIV");t.dataset.productoId=e.id,t.classList.add("productoDiv");const o=document.createElement("H3");o.textContent=e.nombre;const c=document.createElement("H4");c.textContent="$."+e.precio;const n=document.createElement("DIV");n.classList.add("cantidad-descuento");const r=document.createElement("P");r.textContent=e.cantidad+" UND";const d=document.createElement("P");d.textContent=e.descuento+"%",n.appendChild(r),n.appendChild(d),t.appendChild(o),t.appendChild(c),t.appendChild(n),document.querySelector("#cotizador").appendChild(t)})}()}(await n.json())}catch(e){console.log(e)}}(productoAgregar)}})),document.querySelector("#codigo").addEventListener("keyup",(function(t){const o=t.target.value.trim();""!==o?async function(t){const o=`${e}/api/buscarProductos?producto=${t}`,n=await fetch(o),r=await n.json(),d=r.producto;"error"===r&&c(n.tipo,n.mensaje,document.querySelector(".paso2Titulo")),function(e){document.querySelector("#idProducto").value=e.id,document.querySelector("#producto").value=e.nombre,document.querySelector("#precio").value=e.precio}(d)}(o):c("error","El producto es Obligatorio",document.querySelector(".paso2Titulo"))}));async function o(t){try{const o=`${e}/api/buscarClientes?nit=${t}`,c=await fetch(o),r=await c.json();!function(e){const t=document.querySelector("#razon"),o=document.querySelector("#telefono"),c=document.querySelector("#direccion"),r=document.querySelector("#departamento"),d=document.querySelector("#ciudad");t.value=e.razon_social,o.value=e.telefono,c.value=e.direccion,r.value=e.departamentoId,d.value=e.ciudad,n({...e})}(r.cliente)}catch(e){console.log(e)}}function c(e,t,o){const c=document.querySelector(".alerta");c&&c.remove();const n=document.createElement("DIV");n.classList.add("alerta",e),n.textContent=t,o.parentElement.insertBefore(n,o.nextElementSibling),setTimeout(()=>{n.remove()},2500)}function n(e){console.log(e.id)}document.querySelector(".nitCliente").addEventListener("keyup",(function(e){o(e.target.value)}))}();